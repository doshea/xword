(function( $ ) {
  $.fn.get_row = function() {return this.attr('row');};
  $.fn.get_col = function() {return this.attr('col');};

  $.fn.in_top_row = function() {return $(this).get_row() == 1;};
  $.fn.in_bottom_row = function() {return this.get_row() == $('#rows').val();};
  $.fn.in_left_col = function() {return this.get_col() == 1;};
  $.fn.in_right_col = function() {return this.get_col() == $('#cols').val();};

  $.fn.has_above = function(){if(this.in_top_row()){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var above = $(".cell[row='" + (row - 1) + "'][col='"+ col +"']");return !above.hasClass('void');}};
  $.fn.has_below = function(){if(this.in_bottom_row()){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var below = $(".cell[row='" + (row + 1) + "'][col='"+ col +"']");return !below.hasClass('void');}};
  $.fn.has_left = function(){if(this.in_left_col()){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var left = $(".cell[row='" + row + "'][col='"+ (col-1) +"']");return !left.hasClass('void');}};
  $.fn.has_right = function(){if(this.in_right_col()){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var right = $(".cell[row='" + row + "'][col='"+ (col+1) +"']");return !right.hasClass('void');}};

  $.fn.cell_to_left = function() {return this.prevAll('.cell:not(.void)').first();};
  $.fn.cell_to_right = function() {return this.nextAll('.cell:not(.void)').first();};
  $.fn.cell_above = function() {if( this.in_top_row() ){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var above = $(".cell[row='" + (row - 1) + "'][col='"+ col +"']");if(!above.hasClass('void')){return above;} else {return above.cell_above();}}};
  $.fn.cell_below = function() {if( this.in_bottom_row() ){return false;} else {var row = parseInt(this.get_row());var col = parseInt(this.get_col());var below = $(".cell[row='" + (row + 1) + "'][col='"+ col +"']");if (!below.hasClass('void')){return below;} else {return below.cell_below();}}};

  $.fn.get_down_word_cells = function() {return this.get_down_start_cell().down_word_from_start();};
  $.fn.get_down_start_cell = function() {if( !this.has_above() ){return this;} else {return this.cell_above().get_down_start_cell();}};
  $.fn.down_word_from_start = function() {if( !this.has_below() ){return [this];} else {return [this].concat(this.cell_below().down_word_from_start());}};
  $.fn.get_down_word = function(){return $.map( this.get_down_word_cells(), function(el, i){return el.text();}).join('');};

  $.fn.get_across_word_cells = function() {return this.get_across_start_cell().across_word_from_start();};
  $.fn.get_across_start_cell = function() {if( !this.has_left() ){return this;} else {return this.cell_to_left().get_across_start_cell();}};
  $.fn.across_word_from_start = function() {if( !this.has_right() ){return [this];} else {return [this].concat(this.cell_to_right().across_word_from_start());}};
  $.fn.get_across_word = function(){return $.map( this.get_across_word_cells(), function(el, i){return el.text();}).join('');};



})( jQuery );