= content_tag(:div, id: dom_id(comment), class: 'row') do
  .large-1.columns.small-3
    = link_to (image_tag comment.user.image.comment_size), comment.user
  .large-11.columns
    %p<
      = link_to "#{comment.user.display_name}: ", comment.user
      %br
      = comment.content
    %ul.inline-list
      %li
        - if @current_user
          %a.reply-button.reply{style: 'display: inline-block;'}
            %i.fi-comment
            %span Reply
          - if @current_user.is_admin? or (@current_user == comment.user)
            / Replaced: link_to with method: :delete, remote: true → turbo_method: :delete (Turbo handles DELETE)
            = link_to comment, class: 'reply-button', style: 'display: inline-block;', data: { turbo_method: :delete, turbo_confirm: 'Are you SURE you want to delete this comment?' } do
              %i.fi-trash
              %span #{'Admin ' unless (@current_user == comment.user)}Delete
          = link_to nil, class: 'cancel-button', style: 'display: none;' do
            %i.fi-x
            Never mind
          / Replaced: form_tag with remote: true → form_with (Turbo handles AJAX submission)
          = form_with(url: reply_to_comment_path(comment), style: 'display: none;', class: 'reply-form') do |f|
            = text_area_tag('content', nil, id: nil, class: 'reply-content')
      / %li
      /   %a{href: ""} Share
    / id added so reply.turbo_stream.erb can update the reply count display
    %h6.reply-count{id: "reply-count-#{comment.id}"}<
      - if comment.replies.any?
        = pluralize(comment.replies.count, 'Reply')
    / id added so reply.turbo_stream.erb can append new replies to this container
    .replies{id: "replies-#{comment.id}"}
      - comment.replies.each do |reply|
        = render partial: 'comments/partials/reply', locals: {reply: reply}
/ id added so destroy.turbo_stream.erb can also remove this separator
%hr{id: "hr_#{dom_id(comment)}"}/