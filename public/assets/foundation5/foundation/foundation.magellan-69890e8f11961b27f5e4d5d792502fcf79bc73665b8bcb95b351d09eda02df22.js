!function(a,t){"use strict";Foundation.libs.magellan={name:"magellan",version:"5.0.0",settings:{active_class:"active",threshold:0},init:function(){this.fixed_magellan=a("[data-magellan-expedition]"),this.set_threshold(),this.last_destination=a("[data-magellan-destination]").last(),this.events()},events:function(){var e=this;a(this.scope).off(".magellan").on("arrival.fndtn.magellan","[data-magellan-arrival]",function(){var t=a(this),n=t.closest("[data-magellan-expedition]"),i=n.attr("data-magellan-active-class")||e.settings.active_class;t.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(t).removeClass(i),t.addClass(i)}),this.fixed_magellan.off(".magellan").on("update-position.fndtn.magellan",function(){a(this)}).trigger("update-position"),a(t).off(".magellan").on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var n=a(t).scrollTop();e.fixed_magellan.each(function(){var t=a(this);"undefined"==typeof t.data("magellan-top-offset")&&t.data("magellan-top-offset",t.offset().top),"undefined"==typeof t.data("magellan-fixed-position")&&t.data("magellan-fixed-position",!1);var i=n+e.settings.threshold>t.data("magellan-top-offset"),l=t.attr("data-magellan-top-offset");t.data("magellan-fixed-position")!=i&&(t.data("magellan-fixed-position",i),i?(t.addClass("fixed"),t.css({position:"fixed",top:0})):(t.removeClass("fixed"),t.css({position:"",top:""})),i&&"undefined"!=typeof l&&0!=l&&t.css({position:"fixed",top:l+"px"}))})}),this.last_destination.length>0&&a(t).on("scroll.fndtn.magellan",function(){var n=a(t).scrollTop(),i=n+a(t).height(),l=Math.ceil(e.last_destination.offset().top);a("[data-magellan-destination]").each(function(){var t=a(this),s=t.attr("data-magellan-destination"),o=t.offset().top-t.outerHeight(!0)-n;o<=e.settings.threshold&&a("[data-magellan-arrival='"+s+"']").trigger("arrival"),i>=a(e.scope).height()&&l>n&&l<i&&a("[data-magellan-arrival]").last().trigger("arrival")})})},set_threshold:function(){"number"!=typeof this.settings.threshold&&(this.settings.threshold=this.fixed_magellan.length>0?this.fixed_magellan.outerHeight(!0):0)},off:function(){a(this.scope).off(".fndtn.magellan"),a(t).off(".fndtn.magellan")},reflow:function(){}}}(jQuery,this,this.document);