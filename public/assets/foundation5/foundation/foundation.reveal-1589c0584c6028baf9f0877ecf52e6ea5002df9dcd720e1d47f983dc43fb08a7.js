!function(e,t,s,n){"use strict";Foundation.libs.reveal={name:"reveal",version:"5.0.0",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,s){Foundation.inherit(this,"delay"),this.bindings(t,s)},events:function(){var t=this;return e("[data-reveal-id]",this.scope).off(".reveal").on("click.fndtn.reveal",function(s){if(s.preventDefault(),!t.locked){var n=e(this),i=n.data("reveal-ajax");if(t.locked=!0,"undefined"==typeof i)t.open.call(t,n);else{var a=i===!0?n.attr("href"):i;t.open.call(t,n,{url:a})}}}),e(this.scope).off(".reveal").on("click.fndtn.reveal",this.close_targets(),function(s){if(s.preventDefault(),!t.locked){var n=e("[data-reveal].open").data("reveal-init"),i=e(s.target)[0]===e("."+n.bg_class)[0];if(i&&!n.close_on_background_click)return;t.locked=!0,t.close.call(t,i?e("[data-reveal].open"):e(this).closest("[data-reveal]"))}}),e("[data-reveal]",this.scope).length>0?e(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):e(this.scope).on("open.fndtn.reveal","[data-reveal]",this.settings.open).on("opened.fndtn.reveal","[data-reveal]",this.settings.opened).on("opened.fndtn.reveal","[data-reveal]",this.open_video).on("close.fndtn.reveal","[data-reveal]",this.settings.close).on("closed.fndtn.reveal","[data-reveal]",this.settings.closed).on("closed.fndtn.reveal","[data-reveal]",this.close_video),e("body").on("keyup.fndtn.reveal",function(t){var s=e("[data-reveal].open"),n=s.data("reveal-init");27===t.which&&n.close_on_esc&&s.foundation("reveal","close")}),!0},open:function(t,s){if(t)if("undefined"!=typeof t.selector)var n=e("#"+t.data("reveal-id"));else{var n=e(this.scope);s=t}else var n=e(this.scope);if(!n.hasClass("open")){var i=e("[data-reveal].open");if("undefined"==typeof n.data("css-top")&&n.data("css-top",parseInt(n.css("top"),10)).data("offset",this.cache_offset(n)),n.trigger("open"),i.length<1&&this.toggle_bg(),"undefined"!=typeof s&&s.url){var a=this,o="undefined"!=typeof s.success?s.success:null;e.extend(s,{success:function(t,s,d){e.isFunction(o)&&o(t,s,d),n.html(t),e(n).foundation("section","reflow"),a.hide(i,a.settings.css.close),a.show(n,a.settings.css.open)}}),e.ajax(s)}else this.hide(i,this.settings.css.close),this.show(n,this.settings.css.open)}},close:function(t){var t=t&&t.length?t:e(this.scope),s=e("[data-reveal].open");s.length>0&&(this.locked=!0,t.trigger("close"),this.toggle_bg(),this.hide(s,this.settings.css.close))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(){0===e("."+this.settings.bg_class).length&&(this.settings.bg=e("<div />",{"class":this.settings.bg_class}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(s,n){if(n){if(0===s.parent("body").length){var i=s.wrap('<div style="display: none;" />').parent();s.on("closed.fndtn.reveal.wrapped",function(){s.detach().appendTo(i),s.unwrap().unbind("closed.fndtn.reveal.wrapped")}),s.detach().appendTo("body")}if(/pop/i.test(this.settings.animation)){n.top=e(t).scrollTop()-s.data("offset")+"px";var a={top:e(t).scrollTop()+s.data("css-top")+"px",opacity:1};return this.delay(function(){return s.css(n).animate(a,this.settings.animation_speed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animation_speed/2)}if(/fade/i.test(this.settings.animation)){var a={opacity:1};return this.delay(function(){return s.css(n).animate(a,this.settings.animation_speed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animation_speed/2)}return s.css(n).show().css({opacity:1}).addClass("open").trigger("opened")}return/fade/i.test(this.settings.animation)?s.fadeIn(this.settings.animation_speed/2):s.show()},hide:function(s,n){if(n){if(/pop/i.test(this.settings.animation)){var i={top:-e(t).scrollTop()-s.data("offset")+"px",opacity:0};return this.delay(function(){return s.animate(i,this.settings.animation_speed,"linear",function(){this.locked=!1,s.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animation_speed/2)}if(/fade/i.test(this.settings.animation)){var i={opacity:0};return this.delay(function(){return s.animate(i,this.settings.animation_speed,"linear",function(){this.locked=!1,s.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animation_speed/2)}return s.hide().css(n).removeClass("open").trigger("closed")}return/fade/i.test(this.settings.animation)?s.fadeOut(this.settings.animation_speed/2):s.hide()},close_video:function(){var t=e(this).find(".flex-video"),s=t.find("iframe");s.length>0&&(s.attr("data-src",s[0].src),s.attr("src","about:blank"),t.hide())},open_video:function(){var t=e(this).find(".flex-video"),s=t.find("iframe");if(s.length>0){var i=s.attr("data-src");if("string"==typeof i)s[0].src=s.attr("data-src");else{var a=s[0].src;s[0].src=n,s[0].src=a}t.show()}},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10);return e.hide(),t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,this,this.document);