!function(t){function e(){this._defaults={lettersImage:"img/flightBoardLarge.png",lettersSize:[25,34],lettersSeq:" ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",messages:["SEE THE FLIGHT BOARD","CHANGE MESSAGES"],maxLength:20,flips:[3,5],sequential:!1,speed:500,repeat:!0,pause:2e3,selection:"forward",shading:!0,opacity:.5,shadingImages:["img/flightBoardHigh.png","img/flightBoardShad.png"],beforeFlip:null,afterFlip:null},this._uuid=(new Date).getTime()}function i(t){return Math.floor(Math.random()*t)}function s(e,i){return"option"==e&&(0==i.length||1==i.length&&"string"==typeof i[0])||t.inArray(e,o)>-1}t.extend(e.prototype,{markerClassName:"hasFlightBoard",propertyName:"flightBoard",setDefaults:function(e){return t.extend(this._defaults,e||{}),this},_attachPlugin:function(e,i){if(e=t(e),!e.hasClass(this.markerClassName)){var s={_current:0,_next:0,_anims:[],options:t.extend({},this._defaults,i||{})};e.addClass(this.markerClassName).data(this.propertyName,s),this._optionPlugin(e,i)}},_optionPlugin:function(e,i,s,o){if(e=t(e),!i||"string"==typeof i&&null==s){var n=e.data(this.propertyName),p=i;return i=(n||{}).options,i&&p?i[p]:i}if(e.hasClass(this.markerClassName)){if(i=i||{},"string"==typeof i){var p=i;i={},i[p]=s}this._stopPlugin(e[0],!0);var n=e.data(this.propertyName);t.extend(n.options,i);var a=o?Math.min(n._current,n.options.messages.length-1):0;t.extend(n,{_current:a,_next:a,_anims:[]}),e[0].id||(e[0].id="fb"+this._uuid++),t("#"+e[0].id+"_css").remove(),t('<style type="text/css" id="'+e[0].id+'_css">#'+e[0].id+" span { display: block; float: left; width: "+n.options.lettersSize[0]+"px; height: "+n.options.lettersSize[1]+"px; background: url("+n.options.lettersImage+") center no-repeat; }</style>").appendTo("head");for(var r="",l=n.options.messages[n._current]||"",h=0;h<n.options.maxLength;h++)r+='<span style="background-position: -'+Math.max(0,n.options.lettersSeq.indexOf(l.charAt(h)||" "))*n.options.lettersSize[0]+'px 0px;"></span>';e.html(r),this._prepareFlip(e[0])}},_destroyPlugin:function(e){e=t(e),e.hasClass(this.markerClassName)&&(this._stopPlugin(e[0]),e.removeClass(this.markerClassName).empty().removeData(this.propertyName),t("#"+e[0].id+"_css").remove())},_currentPlugin:function(e){e=t(e);var i=e.data(this.propertyName);return e.hasClass(this.markerClassName)?i.options.messages[i._current]:null},_nextPlugin:function(e){e=t(e);var i=e.data(this.propertyName);return e.hasClass(this.markerClassName)?i.options.messages[i._next]:null},_stopPlugin:function(e,i){e=t(e);var s=e.data(this.propertyName);s._timer&&(clearTimeout(s._timer),s._timer=null);for(var o=0;o<s._anims.length;o++)s._anims[o].stop().remove();i||this._optionPlugin(e[0],"repeat",!1,!0)},_startPlugin:function(t){this._optionPlugin(t,"repeat",!0,!0)},_prepareFlip:function(e){e=t(e);var s=e.data(this.propertyName);s._current=s._next,s._next=("random"==s.options.selection?i(s.options.messages.length-1):"backward"==s.options.selection?s._next+s.options.messages.length-1:s._next+1)%s.options.messages.length,s._next="random"==s.options.selection&&s._next==s._current?s.options.messages.length-1:s._next,s.options.repeat&&!s._timer&&(s._timer=setTimeout(function(){n._flipPlugin(e[0])},s.options.pause))},_flipPlugin:function(e,s){this._stopPlugin(e,!0);var o=t.data(e,this.propertyName);null!=s&&s>=0&&s<=o.options.messages.length&&(o._next=s),o._count=o.options.maxLength,o.options.beforeFlip&&o.options.beforeFlip.apply(e,[o.options.messages[o._current],o.options.messages[o._next]]),o._anims=[];for(var n=o.options.messages[o._current],s=o.options.messages[o._next],p=t(e).offset(),a=t.isArray(o.options.flips)?o.options.flips:[o.options.flips,o.options.flips],r=this._charTemplate(o),l=0;l<o.options.maxLength;l++){var h=r.clone().css({left:p.left+l*o.options.lettersSize[0],top:p.top}).appendTo("body");o._anims.push(h);var f=i(a[1]-a[0]+1)+a[0],d="";if(o.options.sequential){var g=o.options.lettersSeq.indexOf(n.charAt(l)||" "),u=o.options.lettersSeq.indexOf(s.charAt(l)||" ");d=g<u?o.options.lettersSeq.substring(g,u+1):o.options.lettersSeq.substring(g)+o.options.lettersSeq.substring(0,u+1)}else{d=n.charAt(l)||" ";for(var c=1;c<f;c++)d+=o.options.lettersSeq.charAt(i(o.options.lettersSeq.length));d+=s.charAt(l)||" "}var m=isNaN(o.options.speed)?t.fx.speeds[o.options.speed]||t.fx.speeds._default:o.options.speed;m=.9*m+i(.2*m),this._flipChar(e,h,o,t("span:eq("+l+")",e),d,m)}},_charTemplate:function(e){var i=e.options.lettersImage,s=e.options.lettersSize[0],o=e.options.lettersSize[1],n=e.options.lettersSeq.length*s,p='<div style="position: absolute; left: 0px; top: 0px; width: '+s+"px; height: "+o+'px;"><div class="fbnt" style="position: absolute; width: '+s+"px; height: "+o/2+'px; overflow: hidden;"><img src="'+i+'" style="position: relative; left: 0px; width: '+n+"px; height: "+o+'px; vertical-align: top;"></div><div class="fbob" style="position: absolute; top: '+o/2+"px; width: "+s+"px; height: "+o/2+'px; overflow: hidden;"><img src="'+i+'" style="position: relative; left: 0px; top: -'+o/2+"px; width: "+n+"px; height: "+o+'px; vertical-align: top;"></div><div class="fbot" style="position: absolute; top: 0px; width: '+s+"px; height: "+o/2+'px; overflow: hidden;"><img src="'+i+'" style="position: relative; left: 0px; width: '+n+"px; height: "+o+'px; vertical-align: top;"></div><div class="fbnb" style="position: absolute; top: '+o/2+"px; width: "+s+'px; height: 0px; overflow: hidden;"><img src="'+i+'" style="position: relative; left: 0px; top: 0px; width: '+n+'px; height: 0px; vertical-align: top;"></div>';return e.options.shading&&(p+=(t.support.opacity?"<div":'<img src="'+e.options.shadingImages[1]+'"')+' class="fbsh" style="position: absolute; width: '+s+"px; background-color: black; opacity: "+e.options.opacity+"; filter: alpha(opacity="+100*e.options.opacity+');"'+(t.support.opacity?"></div>":"/>")+(t.support.opacity?"<div":'<img src="'+e.options.shadingImages[0]+'"')+' class="fbhi" style="position: absolute; top: '+o/2+"px; width: "+s+"px; height: 0px; background-color: white; opacity: "+e.options.opacity+"; filter: alpha(opacity="+100*e.options.opacity+');"'+(t.support.opacity?"></div>":"/>")),t(p+"</div>")},_finishedChar:function(e){var i=t.data(e,this.propertyName);if(i._count--,0==i._count){var s=[i.options.messages[i._current],i.options.messages[i._next]];this._prepareFlip(e),i.options.afterFlip&&i.options.afterFlip.apply(e,s)}},_flipChar:function(e,i,s,o,p,a){if(p.length<2)return i.remove().removeData(n.propertyName),void n._finishedChar(e);var r=s.options.lettersSize[0],l=s.options.lettersSeq.indexOf(p.charAt(0)),h=s.options.lettersSeq.indexOf(p.charAt(1)),f=i[0].firstChild;t(f.firstChild).css("left",-h*r),f=f.nextSibling,t(f.firstChild).css("left",-l*r),f=f.nextSibling,t(f.firstChild).css("left",-l*r),f=f.nextSibling,t(f).css("height",0),t(f.firstChild).css("left",-h*r),i.data(n.propertyName,{span:o,offset:-h*r}),i.animate({fbHeight:1},a,function(){n._flipChar(e,i,s,o,p.substring(1),a)})},_getStepProps:function(e){var i=[],s=t(e).height(),o=e.children||e.childNodes;if(i[0]={elem:o[2],first:!0,props:{top:{start:0,diff:s,units:"px",min:-999999},height:{start:s/2+1,diff:-s,units:"px",min:0}}},i[1]={elem:o[2].firstChild,first:!0,props:{height:{start:s,diff:-2*s,units:"px",min:0}}},i[2]={elem:o[3],first:!1,props:{height:{start:-s/2,diff:s,units:"px",min:0}}},i[3]={elem:o[3].firstChild,first:!1,props:{top:{start:s/2,diff:-s,units:"px",min:-999999},height:{start:-s,diff:2*s,units:"px",min:0}}},o.length>4){var n=parseFloat(t(o[4]).css("opacity"));i[4]={elem:o[4],first:!0,props:{top:{start:0,diff:s,units:"px",min:-999999},height:{start:s/2+1,diff:-s,units:"px",min:0},opacity:{start:0,diff:2*n,units:"",min:0}}},i[5]={elem:o[5],first:!1,props:{height:{start:-s/2,diff:s,units:"px",min:0},opacity:{start:2*n,diff:-2*n,units:"",min:0}}}}return i}}),t.fx.step.fbHeight=function(e){e.stepProps||(e.stepProps=n._getStepProps(e.elem),e.first=!0);for(var i=0;i<e.stepProps.length;i++){var s=e.stepProps[i];if(e.first==s.first)for(var o in s.props){var p=s.props[o];s.elem.style[o]=Math.max(e.pos*p.diff+p.start,p.min)+p.units,t.support.opacity||"opacity"!=o||(s.elem.style.filter="alpha(opacity="+100*Math.max(e.pos*p.diff+p.start,p.min)+")")}}if(e.first&&e.pos>=.5&&(e.first=!1),1==e.pos){var a=t.data(e.elem,n.propertyName);a&&a.span.css("background-position",a.offset+"px 0px")}};var o=["current","next"];t.fn.flightboard=function(t){var e=Array.prototype.slice.call(arguments,1);return s(t,e)?n["_"+t+"Plugin"].apply(n,[this[0]].concat(e)):this.each(function(){if("string"==typeof t){if(!n["_"+t+"Plugin"])throw"Unknown command: "+t;n["_"+t+"Plugin"].apply(n,[this].concat(e))}else n._attachPlugin(this,t||{})})};var n=t.flightboard=new e}(jQuery);